<?xml version="1.0" encoding="UTF-8"?>

<deployment xmlns="urn:jboss:bean-deployer:2.0">

  <bean name="RailsStructure"                       class="org.torquebox.rails.deployers.RailsStructure"/>
  <bean name="RailsRootRecognizingDeployer"         class="org.torquebox.rails.deployers.RailsRootRecognizingDeployer"/>
  <bean name="RailsGemVersionDeployer"              class="org.torquebox.rails.deployers.RailsGemVersionDeployer"/>
  <bean name="AppRailsYamlParsingDeployer"          class="org.torquebox.rails.deployers.AppRailsYamlParsingDeployer"/>
  <bean name="RailsRackDeployer"                    class="org.torquebox.rails.deployers.RailsRackDeployer"/>
  <bean name="RailsAutoloadPathDeployer"            class="org.torquebox.rails.deployers.RailsAutoloadPathDeployer"/>
  <bean name="RailsEnvYamlParsingDeployer"          class="org.torquebox.rails.deployers.RailsEnvYamlParsingDeployer"/>
  <bean name="RailsArchiveDirectoryMounter"         class="org.torquebox.rails.deployers.RailsArchiveDirectoryMounter"/>


  <bean name="DefaultCacheManager" class="org.infinispan.manager.DefaultCacheManager"/>
  <bean name="MemcachedServer" class="org.infinispan.server.memcached.MemcachedServer">
    <install method="start">
      <parameter class="java.lang.String">${jboss.infinispan.memcached.server.properties:META-INF/memcached.properties}</parameter>
      <parameter class="org.infinispan.manager.EmbeddedCacheManager">
        <inject bean="DefaultCacheManager"/>
      </parameter>
    </install>
  </bean>

</deployment>
