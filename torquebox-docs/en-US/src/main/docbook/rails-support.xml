<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
"http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<chapter id="rails-support">
  <title>Ruby-on-Rails Support</title>

  <para>TorqueBox provides an enterprise-grade environment that not only
  provides complete Ruby-on-Rails compatibility, but also goes beyond the
  functionality offered in traditional Rails environments.</para>

  <section id="ruby-on-rails" revision="1">
    <title>Ruby-on-Rails</title>

    <para>Ruby-on-Rails (also referred to as "RoR" or "Rails") is one of the
    most popular Model-View-Controller (MVC) frameworks for the Ruby language.
    It was originally created by David Heinemeier Hansson at <ulink
    url="http://37signals.com/">37signals</ulink> during the course of
    building many actual Ruby applications for their consulting
    business.</para>

    <para>Rails has straight-forward components representing models, views,
    and controllers. The framework as a whole values convention over
    configuration. It has been described as "opinionated software" in that
    many decisions have been taken away from the end-user.</para>

    <para>It is exactly the opinionated nature of Rails that allows it to be
    considered a simple and agile framework for quickly building web-based
    applications. Additionally, since Ruby is an interpreted language instead
    of compiled, the assets of an application can be edited quickly, with the
    results being immediately available. In most cases, the application does
    not need to be restarted to see changes in models, views or controllers
    reflected.</para>
  </section>

  <section id="intro-rails-on-torquebox" revision="1">
    <title>Rails on TorqueBox</title>

    <para>Since Ruby-on-Rails ostensibly doesn't do anything new, but simply
    does it with a different language, TorqueBox uses the power of <ulink
    url="http://jruby.org/">JRuby</ulink> to deploy regular Ruby-on-Rails apps
    within the JBoss AS appserver.</para>

    <para>Your Rails application gets deployed alongside any other WAR or EAR,
    complete with the ability to run on a cluster. The full JBoss Web stack is
    utilized to provide enterprise-grade serving for Rails applications</para>
  </section>

  <section id="preparing-your-rails-application">
    <title>Preparing your Rails application</title>

    <para>While TorqueBox is 100% compatible with Ruby-on-Rails, there are a
    few steps that must be taken to ensure success.</para>

    <section>
      <title>Freeze Rails</title>

      <para>TODO</para>
    </section>

    <section>
      <title>Include the TorqueBox gem</title>

      <para>In order to gain access to the advanced features of TorqueBox, you
      must include the TorqueBox gem into your project.</para>

      <para></para>

      <section>
        <title>Using Git Submodules</title>

        <para>IF you are using Git for the revision-control of your project,
        you may want to use Git's submodule facility to link the gem from the
        official repository into your project.</para>

        <para><example>
            <title>Using Git submodule for
            <filename>torquebox-gem</filename></title>

            <para><screen><prompt>$</prompt> <command>git submodule add git://github.com/torquebox/torquebox-gem.git vendor/plugins/torquebox-gem</command>
<computeroutput>Initialize vendor/plugins/torquebox-gem/.git
Initialized empty Git repository in /Users/bob/myapp/vendor/plugins/torquebox-gem/.git/
remote: Counting objects: 26, done.
remote: Compressing objects: 100% (23/23), done.
remote: Total 26 (delta 1), reused 0 (delta 0)
Receiving objects: 100% (26/26), 7.30 KiB, done.
Resolving deltas: 100% (1/1), done.</computeroutput>
<prompt>$</prompt> <command>cd vendor/plugins/torquebox-gem</command>
<prompt>$</prompt> <command>git checkout ${project.version}</command></screen></para>
          </example></para>

        <para>Your project will be linked to ${project.version} of
        <filename>torquebox-gem</filename>. To later update the version you're
        using with your project, simply <command>checkout</command> a new
        commit, tag or branch.</para>
      </section>
    </section>

    <section>
      <title>Eliminate or replace "native" Gems</title>

      <para>TODO</para>
    </section>

    <section>
      <title>Freeze Gems</title>

      <para>TODO</para>
    </section>
  </section>

  <section>
    <title>Scheduled Jobs</title>

    <para>Rails applications support <link linkend="scheduled-jobs">scheduled
    jobs</link> located under
    <filename>$RAILS_ROOT/app/jobs/</filename>.</para>
  </section>

  <section>
    <title>Task Queues</title>

    <para>Rails applications support <link linkend="task-queues">task
    queues</link> located under
    <filename>$RAILS_ROOT/app/queues/</filename>.</para>
  </section>
</chapter>
